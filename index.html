<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>EXTREMELY URGENT: A Very Important Question</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Pacifico&family=Nunito:wght@400;700&display=swap');

    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      background: linear-gradient(135deg, #fce4ec, #f8bbd0, #f48fb1);
      font-family: 'Nunito', sans-serif;
      overflow: hidden;
      position: relative;
    }

    /* Floating hearts background */
    .hearts-bg {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 0;
      overflow: hidden;
    }

    .floating-heart {
      position: absolute;
      bottom: -60px;
      font-size: 24px;
      animation: floatUp linear infinite;
      opacity: 0.6;
    }

    @keyframes floatUp {
      0% { transform: translateY(0) rotate(0deg) scale(1); opacity: 0.6; }
      50% { opacity: 0.8; }
      100% { transform: translateY(-110vh) rotate(360deg) scale(0.5); opacity: 0; }
    }

    /* Main card */
    .card {
      background: rgba(255, 255, 255, 0.92);
      backdrop-filter: blur(10px);
      border-radius: 24px;
      padding: 48px 40px;
      text-align: center;
      box-shadow: 0 20px 60px rgba(233, 30, 99, 0.2), 0 0 0 1px rgba(255,255,255,0.5);
      z-index: 1;
      max-width: 480px;
      width: 90%;
      position: relative;
      animation: cardEntrance 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
    }

    @keyframes cardEntrance {
      0% { transform: scale(0.3) rotate(-5deg); opacity: 0; }
      70% { transform: scale(1.05) rotate(1deg); opacity: 1; }
      100% { transform: scale(1) rotate(0deg); opacity: 1; }
    }

    .card:hover {
      animation: wiggle 0.3s ease-in-out;
    }

    @keyframes wiggle {
      0% { transform: rotate(0deg); }
      50% { transform: rotate(1.5deg); }
      100% { transform: rotate(0deg); }
    }

    .big-heart {
      font-size: 80px;
      animation: heartbeat 1.2s ease-in-out infinite, sideToSide 2s ease-in-out infinite;
      display: inline-block;
      filter: drop-shadow(0 4px 12px rgba(233, 30, 99, 0.4));
      cursor: grab;
    }

    @keyframes sideToSide {
      0%, 100% { margin-left: 0; }
      50% { margin-left: 10px; }
    }

    @keyframes heartbeat {
      0%, 100% { transform: scale(1); }
      15% { transform: scale(1.15); }
      30% { transform: scale(1); }
      45% { transform: scale(1.1); }
      60% { transform: scale(1); }
    }

    h1 {
      font-family: 'Pacifico', cursive;
      font-size: 2.2rem;
      color: #c2185b;
      margin: 20px 0 12px;
      line-height: 1.3;
    }

    .subtitle {
      color: #e91e63;
      font-size: 1.1rem;
      margin-bottom: 32px;
      font-weight: 400;
    }

    .buttons {
      display: flex;
      gap: 20px;
      justify-content: center;
      align-items: center;
      min-height: 60px;
      flex-wrap: wrap;
    }

    .btn {
      padding: 14px 40px;
      border: none;
      border-radius: 50px;
      font-family: 'Nunito', sans-serif;
      font-size: 1.15rem;
      font-weight: 700;
      cursor: pointer;
      transition: transform 0.2s, box-shadow 0.2s;
    }

    .btn-yes {
      background: linear-gradient(135deg, #e91e63, #c2185b);
      color: white;
      box-shadow: 0 6px 24px rgba(233, 30, 99, 0.4);
    }

    .btn-yes:hover {
      transform: scale(1.08);
      box-shadow: 0 8px 32px rgba(233, 30, 99, 0.5);
      animation: pulseYes 0.3s ease-in-out infinite alternate;
    }

    @keyframes pulseYes {
      from { transform: scale(1.06); }
      to { transform: scale(1.14); }
    }

    .btn-no {
      background: linear-gradient(135deg, #b0bec5, #78909c);
      color: white;
      box-shadow: 0 4px 16px rgba(0, 0, 0, 0.15);
      position: relative;
      user-select: none;
      transition: transform 0.3s, opacity 0.3s, font-size 0.3s;
    }

    .btn-no.panicking {
      animation: noPanic 0.15s ease-in-out infinite alternate;
    }

    @keyframes noPanic {
      from { transform: rotate(-5deg); }
      to { transform: rotate(5deg); }
    }

    /* Yes screen */
    .yes-screen {
      display: none;
      flex-direction: column;
      align-items: center;
    }

    .yes-screen .celebration {
      font-size: 80px;
      animation: heartbeat 1.2s ease-in-out infinite, spinIn 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
    }

    @keyframes spinIn {
      0% { transform: scale(0) rotate(-720deg); opacity: 0; }
      100% { transform: scale(1) rotate(0deg); opacity: 1; }
    }

    .yes-screen h1 {
      font-size: 2.5rem;
      margin: 16px 0;
      animation: bounceIn 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) 0.3s both;
    }

    @keyframes bounceIn {
      0% { transform: scale(0) translateY(40px); opacity: 0; }
      100% { transform: scale(1) translateY(0); opacity: 1; }
    }

    .yes-screen .love-msg {
      color: #ad1457;
      font-size: 1.2rem;
      line-height: 1.6;
      max-width: 360px;
      animation: bounceIn 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) 0.6s both;
    }

    /* Confetti canvas */
    #confetti {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 10;
    }

    /* Sass messages when No escapes */
    .sass-msg {
      margin-top: 16px;
      color: #ad1457;
      font-weight: 700;
      font-size: 0.95rem;
      min-height: 24px;
      transition: opacity 0.3s;
    }

    .sass-msg.pop {
      animation: popIn 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
    }

    @keyframes popIn {
      0% { transform: scale(0.5); opacity: 0; }
      100% { transform: scale(1); opacity: 1; }
    }
  </style>
</head>
<body>

  <div class="hearts-bg" id="heartsBg"></div>
  <canvas id="confetti"></canvas>

  <div class="card" id="card">
    <!-- Question screen -->
    <div id="questionScreen">
      <div class="big-heart" id="bigHeart" onclick="heartClick()">ðŸ’–</div>
      <h1>Dear Cami, Will You Be My Valentine?</h1>
      <p class="subtitle">This is a CRITICALLY important, EXTREMELY urgent question. No pressure.</p>
      <div class="buttons">
        <button class="btn btn-yes" id="yesBtn" onclick="sayYes()">Yes! Obviously!</button>
        <button class="btn btn-no" id="noBtn">No</button>
      </div>
      <p class="sass-msg" id="sassMsg">&nbsp;</p>
    </div>

    <!-- Yes screen -->
    <div class="yes-screen" id="yesScreen">
      <div class="celebration">ðŸ¥°</div>
      <h1>YAAAAY!!!</h1>
      <p class="love-msg">
        I knew you'd say yes! Was there ever really a doubt?! ðŸ’•<br><br>
        You just made me the happiest person in the ENTIRE universe (and possibly adjacent universes).
        6PM Reservations are no longer canceled for our romantic dinner at the Putnum Room.
        Can't wait to spend the day with you! <br><br>
        (The "No" button never stood a chance.)
      </p>
    </div>
  </div>

  <script>
    // â”€â”€ Floating hearts background â”€â”€
    const heartsBg = document.getElementById('heartsBg');
    const heartEmojis = ['ðŸ’•', 'ðŸ’—', 'ðŸ’–', 'ðŸ’˜', 'ðŸ’', 'â¤ï¸', 'ðŸ©·', 'ðŸ’ž'];
    function spawnHeart() {
      const el = document.createElement('span');
      el.classList.add('floating-heart');
      el.textContent = heartEmojis[Math.floor(Math.random() * heartEmojis.length)];
      el.style.left = Math.random() * 100 + '%';
      el.style.fontSize = (16 + Math.random() * 24) + 'px';
      const dur = 6 + Math.random() * 8;
      el.style.animationDuration = dur + 's';
      el.style.animationDelay = '0s';
      heartsBg.appendChild(el);
      setTimeout(() => el.remove(), dur * 1000);
    }
    const heartInterval = setInterval(spawnHeart, 400);
    for (let i = 0; i < 12; i++) setTimeout(spawnHeart, i * 200);

    // â”€â”€ No button escape logic â”€â”€
    const noBtn = document.getElementById('noBtn');
    const sassMsg = document.getElementById('sassMsg');
    const card = document.getElementById('card');

    const sassMessages = [
      "Nice try! ðŸ˜",
      "Nope, not happening!",
      "You can't catch me! ðŸƒâ€â™‚ï¸",
      "Wrong answer, try again!",
      "That button is off limits! ðŸš«",
      "Haha, too slow! I trained for this.",
      "The only option is Yes ðŸ’–",
      "I don't think so! ðŸ˜œ",
      "Almost! ...lol no not really ðŸ˜‚",
      "You sure about that? ðŸ¤¨",
      "My reflexes are ELITE!",
      "Error 404: 'No' not found",
      "That's not very valentine of you",
      "I'll keep running forever! ðŸƒâ€â™€ï¸",
      "I'm literally begging you to press Yes",
      "The No button is SCARED of you",
      "This button has places to be!",
      "You're making this harder than it needs to be",
      "Just click Yes! The button is RIGHT THERE!",
      "I can do this all day ðŸ’ª",
      "Plot twist: you were always going to say Yes",
      "The No button filed a restraining order",
    ];

    let sassIndex = 0;
    let escapeCount = 0;
    let yesGrowth = 1;
    let noShrink = 1;

    // Heart click easter egg
    const heartClickMessages = [
      "ðŸ’– You clicked the heart! Now click Yes!",
      "ðŸ’— That tickles! But seriously, click Yes.",
      "ðŸ’˜ I appreciate the love, but the Yes button is down there!",
      "ðŸ’ Okay okay, I feel the love. YES BUTTON. PLEASE.",
      "ðŸ’ž We get it, you like hearts. CLICK. YES.",
    ];
    let heartClickCount = 0;
    function heartClick() {
      const heart = document.getElementById('bigHeart');
      heart.style.animation = 'none';
      heart.offsetHeight;
      heart.style.animation = 'heartbeat 1.2s ease-in-out infinite, sideToSide 2s ease-in-out infinite';
      heart.style.transform = 'scale(1.3) rotate(' + (Math.random() * 40 - 20) + 'deg)';
      setTimeout(() => heart.style.transform = '', 300);
      sassMsg.textContent = heartClickMessages[Math.min(heartClickCount, heartClickMessages.length - 1)];
      sassMsg.classList.remove('pop');
      sassMsg.offsetHeight;
      sassMsg.classList.add('pop');
      heartClickCount++;
    }

    function getDistance(r1, r2) {
      const cx1 = r1.left + r1.width / 2;
      const cy1 = r1.top + r1.height / 2;
      const cx2 = r2.left + r2.width / 2;
      const cy2 = r2.top + r2.height / 2;
      return Math.hypot(cx1 - cx2, cy1 - cy2);
    }

    function escapeNo(e) {
      const btnRect = noBtn.getBoundingClientRect();
      const mouseRect = { left: e.clientX - 2, top: e.clientY - 2, width: 4, height: 4 };

      const dist = getDistance(btnRect, mouseRect);
      const threshold = 100;

      if (dist > threshold) return;

      escapeCount++;
      // Show sass message after 1 try
      if (escapeCount >= 1) {
        sassMsg.textContent = sassMessages[sassIndex % sassMessages.length];
        sassMsg.classList.remove('pop');
        sassMsg.offsetHeight;
        sassMsg.classList.add('pop');
        sassIndex++;
      }

      // Grow the Yes button to be more tempting
      const yesBtn = document.getElementById('yesBtn');
      yesGrowth = Math.min(yesGrowth + 0.08, 2.0);
      yesBtn.style.transform = `scale(${yesGrowth})`;

      // Shrink the No button - it's scared!
      noShrink = Math.max(noShrink - 0.06, 0.4);
      noBtn.style.transform = `scale(${noShrink})`;
      noBtn.style.opacity = Math.max(0.4, noShrink);

      // Make No button start panicking after a few escapes
      if (escapeCount >= 3) {
        noBtn.classList.add('panicking');
      }

      // Change No button text as it panics
      if (escapeCount === 3) noBtn.textContent = "No?";
      if (escapeCount === 5) noBtn.textContent = "no...";
      if (escapeCount === 8) noBtn.textContent = "pls stop";
      if (escapeCount === 11) noBtn.textContent = "help";
      if (escapeCount === 14) noBtn.textContent = "okay fine";
      if (escapeCount >= 16) { noBtn.textContent = "..."; }

      // Move button a short distance away, staying near the card
      const cardRect = card.getBoundingClientRect();
      const bw = btnRect.width;
      const bh = btnRect.height;
      const margin = 20;

      // Keep the No button within a box around the card
      const bounds = {
        left: cardRect.left - 60,
        top: cardRect.top - 40,
        right: cardRect.right + 60,
        bottom: cardRect.bottom + 40,
      };

      let newX, newY;
      let attempts = 0;
      const jumpDist = 60 + Math.random() * 60; // short hop: 60-120px
      do {
        const angle = Math.random() * Math.PI * 2;
        const fromX = btnRect.left + bw / 2;
        const fromY = btnRect.top + bh / 2;
        newX = fromX + Math.cos(angle) * jumpDist - bw / 2;
        newY = fromY + Math.sin(angle) * jumpDist - bh / 2;
        attempts++;
      } while (
        attempts < 50 &&
        (newX < bounds.left || newY < bounds.top ||
         newX + bw > bounds.right || newY + bh > bounds.bottom ||
         Math.hypot(newX + bw/2 - e.clientX, newY + bh/2 - e.clientY) < 80)
      );

      // Clamp to the card neighborhood
      newX = Math.max(bounds.left, Math.min(newX, bounds.right - bw));
      newY = Math.max(bounds.top, Math.min(newY, bounds.bottom - bh));

      noBtn.style.position = 'fixed';
      noBtn.style.left = newX + 'px';
      noBtn.style.top = newY + 'px';
      noBtn.style.zIndex = '5';
      noBtn.style.transition = 'none';

    }

    document.addEventListener('mousemove', escapeNo);
    noBtn.addEventListener('touchstart', function(e) {
      e.preventDefault();
      escapeNo({ clientX: e.touches[0].clientX, clientY: e.touches[0].clientY });
    }, { passive: false });

    // â”€â”€ Yes logic â”€â”€
    function sayYes() {
      document.getElementById('questionScreen').style.display = 'none';
      document.getElementById('yesScreen').style.display = 'flex';
      noBtn.style.display = 'none';
      sassMsg.textContent = '';
      // Triple confetti burst for maximum celebration
      launchConfetti();
      setTimeout(() => launchConfetti(), 600);
      setTimeout(() => launchConfetti(), 1200);
      // Speed up the hearts
      clearInterval(heartInterval);
      for (let i = 0; i < 30; i++) setTimeout(spawnHeart, i * 50);
      setInterval(spawnHeart, 150);
    }

    // â”€â”€ Confetti â”€â”€
    function launchConfetti() {
      const canvas = document.getElementById('confetti');
      const ctx = canvas.getContext('2d');
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;

      const pieces = [];
      const colors = ['#e91e63','#f44336','#ff5722','#ff9800','#ffeb3b','#e040fb','#7c4dff','#ff4081'];
      const shapes = ['square', 'heart'];

      for (let i = 0; i < 200; i++) {
        pieces.push({
          x: canvas.width / 2 + (Math.random() - 0.5) * 200,
          y: canvas.height / 2,
          vx: (Math.random() - 0.5) * 18,
          vy: -Math.random() * 18 - 4,
          size: 6 + Math.random() * 8,
          color: colors[Math.floor(Math.random() * colors.length)],
          shape: shapes[Math.floor(Math.random() * shapes.length)],
          rotation: Math.random() * 360,
          rotSpeed: (Math.random() - 0.5) * 12,
          gravity: 0.25 + Math.random() * 0.15,
          opacity: 1,
        });
      }

      function drawHeart(cx, cy, size, rot, color, opacity) {
        ctx.save();
        ctx.translate(cx, cy);
        ctx.rotate((rot * Math.PI) / 180);
        ctx.globalAlpha = opacity;
        ctx.fillStyle = color;
        ctx.beginPath();
        const s = size / 2;
        ctx.moveTo(0, s * 0.4);
        ctx.bezierCurveTo(-s, -s * 0.5, -s * 1.5, s * 0.3, 0, s * 1.2);
        ctx.bezierCurveTo(s * 1.5, s * 0.3, s, -s * 0.5, 0, s * 0.4);
        ctx.fill();
        ctx.restore();
      }

      let frame = 0;
      function animate() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        let alive = false;
        for (const p of pieces) {
          p.x += p.vx;
          p.vy += p.gravity;
          p.y += p.vy;
          p.rotation += p.rotSpeed;
          p.vx *= 0.99;
          if (frame > 60) p.opacity -= 0.008;
          if (p.opacity <= 0) continue;
          alive = true;

          if (p.shape === 'heart') {
            drawHeart(p.x, p.y, p.size, p.rotation, p.color, p.opacity);
          } else {
            ctx.save();
            ctx.translate(p.x, p.y);
            ctx.rotate((p.rotation * Math.PI) / 180);
            ctx.globalAlpha = p.opacity;
            ctx.fillStyle = p.color;
            ctx.fillRect(-p.size / 2, -p.size / 2, p.size, p.size);
            ctx.restore();
          }
        }
        frame++;
        if (alive) requestAnimationFrame(animate);
      }
      animate();
    }

    window.addEventListener('resize', () => {
      const canvas = document.getElementById('confetti');
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
    });
  </script>
</body>
</html>
